{"version":3,"sources":["components/Header.jsx","components/Footer.jsx","config.js","reducer.js","context.js","components/Preloader.jsx","components/GoodsItem.jsx","components/GoodsList.jsx","components/Cart.jsx","components/BasketItem.jsx","components/BasketList.jsx","components/Alert.jsx","components/Shop.jsx","App.js","index.js"],"names":["Header","className","href","id","rel","target","Footer","Date","getFullYear","reducer","state","type","payload","goods","loading","isBasketShow","order","map","el","newQuantity","quantity","itemIndex","findIndex","orderItem","newOrder","newItem","index","alertName","name","filter","ShopContext","createContext","initialState","ContextProvider","children","useReducer","value","dispatch","closeAlert","removeFromBasket","itemId","addToBasket","item","incQuantity","decQuantity","handleBasketShow","setGoods","data","Provider","Preloader","GoodsItem","description","price","full_background","useContext","alt","src","onClick","GoodsList","length","Cart","BasketItem","BasketList","totalPrice","reduce","acc","Alert","useEffect","timerId","setTimeout","clearTimeout","Shop","fetch","headers","process","then","res","json","featured","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f28c3e29.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nexport function Header() {\r\n  return (\r\n    <nav className='cyan accent-4 nav'>\r\n      <div className='nav-wrapper'>\r\n        <a href='#!' className='brand-logo'>\r\n          React Shop\r\n        </a>\r\n        <ul id='nav-mobile' className='right hide-on-med-and-down'>\r\n          <li>\r\n            <a rel='noreferrer' target='_blank' href='https://github.com/piskarev06/react-shop'>\r\n              Repo\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nexport function Footer() {\r\n  return (\r\n    <footer className='page-footer cyan accent-5'>\r\n      <div className='container'>\r\n        © {new Date().getFullYear()} Copyright Text\r\n        <a\r\n          className='grey-text text-lighten-4 right'\r\n          target='_blank'\r\n          rel='noreferrer'\r\n          href='https://github.com/piskarev06/react-shop'>\r\n          Repo\r\n        </a>\r\n      </div>\r\n    </footer>\r\n  )\r\n}\r\n","export const API_KEY = process.env.REACT_APP_API_KEY\r\n\r\nexport const API_URL = 'https://fortniteapi.io/v1/shop?lang=ru'\r\n","export const reducer = (state, { type, payload }) => {\r\n  switch (type) {\r\n    case 'SET_GOODS':\r\n      return {\r\n        ...state,\r\n        goods: payload || [],\r\n        loading: false,\r\n      }\r\n    case 'TOGGLE_BASKET':\r\n      return {\r\n        ...state,\r\n        isBasketShow: !state.isBasketShow,\r\n      }\r\n    case 'INCREMENT_QUANTITY':\r\n      return {\r\n        ...state,\r\n        order: state.order.map((el) => {\r\n          if (el.id === payload.id) {\r\n            const newQuantity = el.quantity + 1\r\n            return {\r\n              ...el,\r\n              quantity: newQuantity,\r\n            }\r\n          } else {\r\n            return el\r\n          }\r\n        }),\r\n      }\r\n    case 'DECREMENT_QUANTITY':\r\n      return {\r\n        ...state,\r\n        order: state.order.map((el) => {\r\n          if (el.id === payload.id) {\r\n            const newQuantity = el.quantity - 1\r\n            return {\r\n              ...el,\r\n              quantity: newQuantity,\r\n            }\r\n          } else {\r\n            return el\r\n          }\r\n        }),\r\n      }\r\n    case 'ADD_TO_BASKET': {\r\n      const itemIndex = state.order.findIndex((orderItem) => orderItem.id === payload.id)\r\n\r\n      let newOrder = null\r\n      if (itemIndex < 0) {\r\n        const newItem = {\r\n          ...payload,\r\n          quantity: 1,\r\n        }\r\n        newOrder = [...state.order, newItem]\r\n      } else {\r\n        newOrder = state.order.map((orderItem, index) => {\r\n          if (index === itemIndex) {\r\n            return {\r\n              ...orderItem,\r\n              quantity: orderItem.quantity + 1,\r\n            }\r\n          } else {\r\n            return orderItem\r\n          }\r\n        })\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        order: newOrder,\r\n        alertName: payload.name,\r\n      }\r\n    }\r\n    case 'CLOSE_ALERT':\r\n      return {\r\n        ...state,\r\n        alertName: '',\r\n      }\r\n    case 'REMOVE_FROM_BASKET':\r\n      return {\r\n        ...state,\r\n        order: state.order.filter((el) => {\r\n          return el.id !== payload.id\r\n        }),\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import React, { createContext, useReducer } from 'react'\r\nimport { reducer } from './reducer'\r\n\r\nexport const ShopContext = createContext()\r\n\r\nconst initialState = {\r\n  goods: [],\r\n  loading: true,\r\n  order: [],\r\n  isBasketShow: false,\r\n  alertName: '',\r\n}\r\n\r\nexport const ContextProvider = ({ children }) => {\r\n  const [value, dispatch] = useReducer(reducer, initialState)\r\n\r\n  value.closeAlert = () => {\r\n    dispatch({ type: 'CLOSE_ALERT' })\r\n  }\r\n\r\n  value.removeFromBasket = (itemId) => {\r\n    dispatch({ type: 'REMOVE_FROM_BASKET', payload: { id: itemId } })\r\n  }\r\n\r\n  value.addToBasket = (item) => {\r\n    dispatch({ type: 'ADD_TO_BASKET', payload: item })\r\n  }\r\n\r\n  value.incQuantity = (id) => {\r\n    dispatch({ type: 'INCREMENT_QUANTITY', payload: { id: id } })\r\n  }\r\n\r\n  value.decQuantity = (id) => {\r\n    dispatch({ type: 'DECREMENT_QUANTITY', payload: { id: id } })\r\n  }\r\n\r\n  value.handleBasketShow = () => {\r\n    dispatch({ type: 'TOGGLE_BASKET' })\r\n  }\r\n\r\n  value.setGoods = (data) => {\r\n    dispatch({ type: 'SET_GOODS', payload: data })\r\n  }\r\n\r\n  return <ShopContext.Provider value={value}>{children}</ShopContext.Provider>\r\n}\r\n","import React from 'react'\r\n\r\nexport function Preloader() {\r\n  return (\r\n    <div className='progress'>\r\n      <div className='indeterminate'></div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useContext } from 'react'\r\n\r\nimport { ShopContext } from '../context'\r\n\r\nexport function GoodsItem({ id, name, description, price, full_background }) {\r\n  const { addToBasket } = useContext(ShopContext)\r\n\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-image'>\r\n        <img alt={name} src={full_background} />\r\n      </div>\r\n      <div className='card-content'>\r\n        <span className='card-title'>{name}</span>\r\n        <p>{description}</p>\r\n      </div>\r\n      <div className='card-action'>\r\n        <button\r\n          onClick={() =>\r\n            addToBasket({\r\n              id,\r\n              name,\r\n              price,\r\n            })\r\n          }\r\n          className='btn'>\r\n          Купить\r\n        </button>\r\n        <span className='right good-price'>{price} V-Bucks</span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useContext } from 'react'\r\nimport { ShopContext } from '../context'\r\n\r\nimport { GoodsItem } from './GoodsItem'\r\n\r\nexport function GoodsList() {\r\n  const { goods = [] } = useContext(ShopContext)\r\n\r\n  if (!goods.length) {\r\n    return <h3>Nothing here</h3>\r\n  }\r\n\r\n  return (\r\n    <div className='goods'>\r\n      {goods.map((el) => (\r\n        <GoodsItem key={el.id} {...el} />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import React, { useContext } from 'react'\r\nimport { ShopContext } from '../context'\r\n\r\nexport function Cart() {\r\n  const { order = 0, handleBasketShow } = useContext(ShopContext)\r\n  const quantity = order.length\r\n  return (\r\n    <div onClick={handleBasketShow} className='cart blue darken-3 white-text'>\r\n      <i className='material-icons'>shopping_cart</i>\r\n      {quantity ? <span className='cart-quantity'>{quantity}</span> : null}\r\n    </div>\r\n  )\r\n}\r\n","import React, { useContext } from 'react'\r\nimport { ShopContext } from '../context'\r\n\r\nexport function BasketItem({ id, name, price, quantity }) {\r\n  const { removeFromBasket, decQuantity, incQuantity } = useContext(ShopContext)\r\n  return (\r\n    <li className='collection-item'>\r\n      {name}{' '}\r\n      {quantity === 1 ? (\r\n        <i onClick={() => removeFromBasket(id)} className='material-icons basket-quantity'>\r\n          remove\r\n        </i>\r\n      ) : (\r\n        <i onClick={() => decQuantity(id)} className='material-icons basket-quantity'>\r\n          remove\r\n        </i>\r\n      )}{' '}\r\n      х{quantity}{' '}\r\n      <i onClick={() => incQuantity(id)} className='material-icons basket-quantity'>\r\n        add\r\n      </i>{' '}\r\n      = {price * quantity}\r\n      <span\r\n        onClick={() =>\r\n          incQuantity({\r\n            id,\r\n            name,\r\n            price,\r\n            quantity,\r\n          })\r\n        }>\r\n        {' '}\r\n        v-bucks\r\n      </span>\r\n      <span onClick={() => removeFromBasket(id)} className='secondary-content'>\r\n        <i className='material-icons basket-delete'>close</i>\r\n      </span>\r\n    </li>\r\n  )\r\n}\r\n","import React, { useContext } from 'react'\r\nimport { ShopContext } from '../context'\r\n\r\nimport { BasketItem } from './BasketItem'\r\n\r\nexport function BasketList() {\r\n  const { handleBasketShow, order = [] } = useContext(ShopContext)\r\n\r\n  const totalPrice = order.reduce((acc, el) => {\r\n    return acc + el.price * el.quantity\r\n  }, 0)\r\n\r\n  return (\r\n    <ul className='collection basket-list'>\r\n      <li className='collection-item active'>Корзина</li>\r\n      {order.length ? (\r\n        order.map((el) => <BasketItem key={el.id} {...el} />)\r\n      ) : (\r\n        <li className='collection-item'>Корзина пуста</li>\r\n      )}\r\n      <li className='collection-item active'>Общая стоимость: {totalPrice} V-BUCKS</li>\r\n      <i onClick={handleBasketShow} className='material-icons basket-close'>\r\n        close\r\n      </i>\r\n    </ul>\r\n  )\r\n}\r\n","import React, { useEffect, useContext } from 'react'\r\n\r\nimport { ShopContext } from '../context'\r\n\r\nexport function Alert() {\r\n  const { alertName = '', closeAlert } = useContext(ShopContext)\r\n\r\n  useEffect(() => {\r\n    const timerId = setTimeout(closeAlert, 3000)\r\n\r\n    return () => {\r\n      clearTimeout(timerId)\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [name])\r\n  return (\r\n    <div id='toast-container'>\r\n      <div className='toast'>{alertName} добавлен в корзину</div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useContext } from 'react'\r\nimport { API_KEY, API_URL } from '../config'\r\nimport { ShopContext } from '../context'\r\n\r\nimport { Preloader } from './Preloader'\r\nimport { GoodsList } from './GoodsList'\r\nimport { Cart } from './Cart'\r\nimport { BasketList } from './BasketList'\r\nimport { Alert } from './Alert'\r\n\r\nexport function Shop() {\r\n  const { setGoods, order, loading, alertName, isBasketShow } = useContext(ShopContext)\r\n\r\n  useEffect(function getGoods() {\r\n    fetch(API_URL, {\r\n      // prettier-ignore\r\n      headers: {\r\n        'Authorization': API_KEY,\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setGoods(data.featured)\r\n      })\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  return (\r\n    <main className='container content'>\r\n      <Cart quantity={order.length} />\r\n      {loading ? <Preloader /> : <GoodsList />}\r\n      {isBasketShow && <BasketList />}\r\n      {alertName && <Alert />}\r\n    </main>\r\n  )\r\n}\r\n","import { Header } from './components/Header'\nimport { Footer } from './components/Footer'\nimport { Shop } from './components/Shop'\n\nimport { ContextProvider } from './context'\n\nfunction App() {\n  return (\n    <>\n      <Header />\n      <ContextProvider>\n        <Shop />\n      </ContextProvider>\n      <Footer />\n    </>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}